<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100% }
      body { height: 100%; margin: 0; padding: 0 }
      #map-canvas { height: 100% }
    </style>
    <script type="text/javascript"
       src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAKN2SV1Sg3rTxson6oxNS0oXx5nv3feU0&sensor=false">
    </script>
    <script type="text/javascript">
	
	
	var ALUM_BETW_SMC = new Object({
	lat : 45.386093,
	lng : -75.693547,
	name : "ALUM_BETW_SMC",
	building : "AH",
	});
	var IH_NE_CRN = new Object({
	lat : 45.386285,
	lng : -75.692217,
	name : "IH_NE_CRN",
	building : "IH",
	});
	var IH_NW_CRN = new Object({
	lat : 45.386003,
	lng : -75.693134,
	name : "IH_NW_CRN",	
	building : "IH",
	});
	var S_SA_PATH=new Object({//point on path south of Southam hall
	lat:45.380935,
	lng:-75.699561,
	name:"S_SA_PATH",
	building:"null",
	});
	
	var PATH_BETW_AH_IH = new Object({
	lat : 45.386195,
	lng : -75.692941,
	name : "PATH_BETW_AH_IH",
	building : "null",
	
	});	
	var contentString=" ";
	PATH_BETW_AH_IH.SURR=new Array(IH_NE_CRN,ALUM_BETW_SMC,IH_NW_CRN);
	var length=PATH_BETW_AH_IH.SURR.length;
	var contentsting=(PATH_BETW_AH_IH.SURR[0].name);
	for(var i=0;i<length;i++){
	contentString+=(PATH_BETW_AH_IH.SURR[i].name+", ");
	
	}
	
	
	
      function initialize() {
        var mapOptions = {
          center: new google.maps.LatLng( 45.388081, -75.69602),
          zoom: 15
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
			
		var myLatlng = new google.maps.LatLng(PATH_BETW_AH_IH.lat,PATH_BETW_AH_IH.lng);
		var destLatlng= new google.maps.LatLng(S_SA_PATH.lat,S_SA_PATH.lng);
		var marker = new google.maps.Marker({
		position: myLatlng,
		title:"location"
		});
		//sets up marker to destination
		var destmarker = new google.maps.Marker({
		position: destLatlng,
		map: map,
		title:"destination"
		});
		var infowindow = new google.maps.InfoWindow({
		content: contentString
		});
		
		google.maps.event.addListener(marker, 'click', function() {
		infowindow.open(map,marker);
		});
		google.maps.event.addListener(destmarker, 'click', function() {
		infowindow.open(map,destmarker);
		});
		

		
		// To add the marker to the map, call setMap();
		marker.setMap(map);	
		
		
		var length=PATH_BETW_AH_IH.SURR.length;
		var dist=100000;// intialize dist to high arbitrary number
		//for loop to make marker only for closest point to destination
		for(var w=0;w<length;w++){
		var getX=(PATH_BETW_AH_IH.SURR[w].lat);
		var getY=(PATH_BETW_AH_IH.SURR[w].lng);
		var destX=(S_SA_PATH.lat);
		var destY=(S_SA_PATH.lng);
		//code segment to find dist between destination and point
		var lats=Math.pow(destX-getX,2);
		var lngs=Math.pow(destY-getY,2);
		var pt_distance=Math.sqrt(lats+lngs);
		
		if(dist>pt_distance){
			
			dist=pt_distance;//update the distance
			//only place the marker for the closest pt
			if(w=length-1){//make sure its the last cycle before placing the marker
			var markcoord=new google.maps.LatLng(getX,getY);
			var marker2 = new google.maps.Marker({
			position: markcoord,
			map: map,
			title:"closest point"
			});
			}
			}
		
	
		}	
			
			
			
			
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
    <div id="map-canvas"/>
  </body>
</html>